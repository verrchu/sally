{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Ingredient definition",
    "type": "object",
    "required": [
      "type",
      "ingredients"
    ],
    "additionalProperties": false,
    "properties": {
        "type": {
          "type": "string",
          "enum": ["BREAKFAST"]
        },
        "ingredients": {
            "type": "object",
            "required": ["regular"],
            "additionalProperties": false,
            "properties": {
                "technical": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "patternProperties": {
                        "^[A-Z_]+$": {
                            "type": "object",
                            "oneOf": [
                                {
                                    "additionalProperties": false,
                                    "required": [
                                      "quantity",
                                      "unit"
                                    ],
                                    "properties": {
                                        "unit": {"$ref": "def.json#/unit"},
                                        "quantity": {
                                          "type": "number",
                                          "exclusiveMinimum": 0
                                        }
                                    }
                                },
                                {
                                    "additionalProperties": false,
                                    "required": [
                                      "quantity"
                                    ],
                                    "properties": {
                                        "quantity": {
                                          "type": "string",
                                          "enum": ["ANY"]
                                        }
                                    }
                                }
                            ]
                        }
                    }
                },
                "regular": {
                    "type": "object",
                    "additionalProperties": false,
                    "minProperties": 1,
                    "patternProperties": {
                        "^[A-Z_]+$": {
                            "type": "object",
                            "additionalProperties": false,
                            "required": [
                              "quantity",
                              "unit"
                            ],
                            "properties": {
                                "unit": {"$ref": "def.json#/unit"},
                                "quantity": {
                                  "type": "number",
                                  "exclusiveMinimum": 0
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
